<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Referencias | Tech Shop</title>

<style>
:root{
  --bg:#0b1220;
  --panel:#0f1a33;
  --border:#243255;
  --text:#e9f0ff;
  --muted:#a9b7d0;
  --accent:#4ea1ff;
  --ok:#31d07f;
  --new:#7cc4ff;
}

body{
  margin:0;
  font-family:Arial,system-ui;
  background:var(--bg);
  color:var(--text);
}

/* ===== MARCO DE LUCES SIMPLE ===== */
.light-frame{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:100;
}
.light-frame::before{
  content:"";
  position:absolute;
  inset:0;
  padding:3px; /* grosor de la línea */
  border-radius:0;
  background:
    repeating-linear-gradient(
      90deg,
      #ff5a5a 0 8px,
      #ffd95a 8px 16px,
      #5affb0 16px 24px,
      #5ac8ff 24px 32px,
      #c88cff 32px 40px
    );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  animation: frameGlow 2.8s ease-in-out infinite;
  opacity:.85;
}
@keyframes frameGlow{
  0%,100%{filter:brightness(.9)}
  50%{filter:brightness(1.3)}
}

.wrap{max-width:980px;margin:auto;padding:20px;position:relative}

/* Animación */
@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.reveal{opacity:0;transform:translateY(12px);animation:fadeUp .6s ease forwards}

/* HERO */
.hero{
  position:relative;
  padding:30px 22px 40px;
  border-radius:18px;
  border:1px solid var(--border);
  overflow:hidden;
  text-align:center;
  background:
    linear-gradient(rgba(11,18,32,.82),rgba(11,18,32,.88)),
    url("banner-techshop.png") center/cover no-repeat;
}

.logo-center{display:flex;justify-content:center;margin-bottom:6px}

.logo-glass{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px 28px;
  border-radius:28px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.09);
  backdrop-filter:blur(14px);
  box-shadow:0 26px 60px rgba(0,0,0,.4);
  max-width:520px;
  margin:auto;
  overflow:hidden;
}

@keyframes shine{0%{transform:translateX(-140%) rotate(12deg)}100%{transform:translateX(140%) rotate(12deg)}}
.logo-glass::after{
  content:"";
  position:absolute;
  top:-35%;left:-60%;
  width:60%;height:180%;
  background:linear-gradient(115deg,transparent,rgba(255,255,255,.22),transparent);
  animation:shine 3.2s ease-in-out infinite;
}

.logo-center img{
  width:100%;
  max-width:420px;
  border-radius:20px;
  filter:drop-shadow(0 8px 26px rgba(0,0,0,.6));
}

.hero-text p{
  margin:0 auto 14px;
  max-width:720px;
  color:#d6e6ff;
  font-size:14px;
}

/* Botones */
.hero-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.pill{display:inline-flex;gap:8px;align-items:center;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);padding:8px 12px;border-radius:999px;font-size:12px}
.dot{width:8px;height:8px;border-radius:999px;background:var(--ok);animation:pulse 1.5s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(49,208,127,.3)}70%{box-shadow:0 0 0 10px rgba(49,208,127,0)}100%{box-shadow:0 0 0 0 rgba(49,208,127,0)}}
.btn{background:var(--accent);color:#081120;padding:10px 14px;border-radius:12px;text-decoration:none;font-weight:bold;border:0;cursor:pointer}
.btn.secondary{background:transparent;color:var(--text);border:1px solid var(--border)}

.card{margin-top:16px;border:1px solid var(--border);background:var(--panel);padding:16px;border-radius:18px}
input{width:100%;max-width:520px;padding:10px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.04);color:var(--text)}

.ref{border-bottom:1px solid var(--border);padding:14px 0}
.ref.new{border-left:3px solid var(--new);padding-left:12px;background:linear-gradient(90deg,rgba(124,196,255,.10),transparent 55%);border-radius:12px}
.badge{font-size:11px;padding:3px 10px;border-radius:999px;border:1px solid rgba(124,196,255,.7);background:rgba(124,196,255,.12);margin-left:8px}

footer{margin-top:14px;font-size:12px;color:var(--muted)}

/* WhatsApp selector */
.wa-widget{position:fixed;right:16px;bottom:16px;z-index:60}
.wa-float{width:54px;height:54px;border-radius:999px;background:#25D366;display:flex;align-items:center;justify-content:center;box-shadow:0 16px 40px rgba(0,0,0,.45);border:0;cursor:pointer}
.wa-float svg{width:28px;height:28px;fill:#0b1220}
.wa-menu{position:absolute;right:0;bottom:66px;display:flex;flex-direction:column;gap:8px;padding:10px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:rgba(15,26,51,.92);backdrop-filter:blur(10px);opacity:0;transform:translateY(10px) scale(.98);pointer-events:none;transition:.18s}
.wa-menu.open{opacity:1;transform:translateY(0) scale(1);pointer-events:auto}
.wa-item{color:var(--text);text-decoration:none;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.06);font-weight:700;font-size:13px}

@media(max-width:520px){
  .hero{padding:24px 14px 28px}
  .logo-center img{max-width:260px}
}
</style>
</head>

<body>
<div class="light-frame"></div>

<div class="wa-widget">
  <button class="wa-float" id="waMainBtn">
    <svg viewBox="0 0 32 32"><path d="M19.11 17.39c-.27-.14-1.6-.79-1.85-.88-.25-.09-.43-.14-.61.14-.18.27-.7.88-.86 1.06-.16.18-.31.2-.58.07-.27-.14-1.14-.42-2.17-1.34-.8-.71-1.34-1.58-1.5-1.85-.16-.27-.02-.42.12-.56.12-.12.27-.31.41-.47.14-.16.18-.27.27-.45.09-.18.05-.34-.02-.47-.07-.14-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.46h-.52c-.18 0-.47.07-.71.34-.25.27-.93.91-.93 2.23s.95 2.59 1.08 2.77c.14.18 1.87 2.85 4.54 4 .64.28 1.14.45 1.53.58.64.2 1.22.17 1.68.1.51-.08 1.6-.65 1.83-1.27.23-.62.23-1.15.16-1.27-.07-.12-.25-.2-.52-.34z"/></svg>
  </button>
  <div class="wa-menu" id="waMenu">
    <a class="wa-item" id="waNormal" target="_blank">WhatsApp</a>
    <a class="wa-item" id="waBusiness">WhatsApp Business</a>
  </div>
</div>

<div class="wrap">

<header class="hero reveal">
  <div class="logo-center"><div class="logo-glass">
    <img src="https://raw.githubusercontent.com/TechJuan09/TechReferencias/refs/heads/main/Tech.png">
  </div></div>
  <div class="hero-text"><p>Tu opinión es importante. Cada referencia ayuda a otros a confiar.</p></div>
  <div class="hero-actions">
    <span class="pill"><span class="dot"></span>Disponible 24/7</span>
    <span class="pill" id="countPill">Cargando…</span>
    <a class="btn" id="formBtn" target="_blank">Dejar referencia</a>
  </div>
</header>

<section class="card reveal">
  <input id="search" placeholder="Buscar referencia..." />
  <div id="list"></div>
  <button class="btn secondary" id="moreBtn" style="display:none">Ver más</button>
  <button class="btn secondary" id="refreshBtn">Actualizar</button>
</section>

<footer>
Tienda: <a href="https://mundo-digital.biznecubano.com" target="_blank">mundo-digital.biznecubano.com</a><br>
WhatsApp Business: <strong>+53 54842473</strong>
</footer>

</div>

<script>
const CSV_URL="https://raw.githubusercontent.com/TechJuan09/TechReferencias/refs/heads/main/referencias.csv";
const FORM_URL="https://docs.google.com/forms/d/e/1FAIpQLSea9XMyX6rm2RViQU6Pzf2fQQUSy-nIkE9wJ4LLKsURLvjXYg/viewform";
document.getElementById("formBtn").href=FORM_URL;

const list=document.getElementById("list"),search=document.getElementById("search"),moreBtn=document.getElementById("moreBtn"),refreshBtn=document.getElementById("refreshBtn"),countPill=document.getElementById("countPill");
let data=[],visible=10;

function esc(s){return String(s||"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");}
function parseCSV(t){const r=[];let row=[],cell="",q=false;for(let i=0;i<t.length;i++){let ch=t[i],nx=t[i+1];if(ch=='"'&&q&&nx=='"'){cell+='"';i++;continue}if(ch=='"'){q=!q;continue}if(ch==','&&!q){row.push(cell);cell="";continue}if((ch=='\n'||ch=='\r')&&!q){if(ch=='\r'&&nx=='\n')i++;row.push(cell);r.push(row);row=[];cell="";continue}cell+=ch}row.push(cell);r.push(row);return r}

function render(){
  const f=data.filter(x=>(x.name+x.text).toLowerCase().includes(search.value.toLowerCase()));
  countPill.textContent=f.length+" referencias";
  moreBtn.style.display=f.length>visible?"inline-block":"none";
  const newest=new Set(data.slice(0,5).map(x=>x._id));
  list.innerHTML=f.slice(0,visible).map(x=>`<div class="ref ${newest.has(x._id)?"new":""}">
    <div><b>${esc(x.name)}</b>${newest.has(x._id)?'<span class="badge">NUEVO</span>':''}</div>
    <div>${esc(x.text)}</div></div>`).join("")||"Sin resultados";
}

async function load(){
  const res=await fetch(CSV_URL+"?t="+Date.now());const text=await res.text();
  const rows=parseCSV(text).slice(1);
  data=rows.map((r,i)=>({_id:"row-"+i,name:r[0],text:r[1],ok:r[2]})).filter(x=>x.ok==="SI");
  visible=10;render();
}

search.oninput=render;moreBtn.onclick=()=>{visible+=10;render()};refreshBtn.onclick=load;load();

/* WhatsApp selector */
const waMainBtn=document.getElementById("waMainBtn"),waMenu=document.getElementById("waMenu"),waNormal=document.getElementById("waNormal"),waBusiness=document.getElementById("waBusiness");
waNormal.href="https://wa.me/5354842473?text=Hola%20Tech%20Shop";
waMainBtn.onclick=e=>{e.stopPropagation();waMenu.classList.toggle("open")}
document.addEventListener("click",()=>waMenu.classList.remove("open"))
waBusiness.onclick=()=>{
  if(/Android/i.test(navigator.userAgent)){
    location.href="intent://send?phone=5354842473#Intent;scheme=whatsapp;package=com.whatsapp.w4b;end";
    setTimeout(()=>location.href=waNormal.href,900);
  }else window.open(waNormal.href,"_blank");
}
</script>
</body>
</html>
